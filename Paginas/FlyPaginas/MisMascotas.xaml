<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FrontEndHealthPets.Paginas.FlyPaginas.MisMascotas"
             xmlns:local="clr-namespace:FrontEndHealthPets.Modelos"
             Title="Mis Mascotas">

    <ContentPage.Resources>
        <!-- Define estilo para los encabezados -->
        <Style x:Key="HeaderStyle" TargetType="Label">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontAttributes" Value="Bold" />
            <Setter Property="TextColor" Value="White" />
            <Setter Property="BackgroundColor" Value="Purple" />
            <Setter Property="HorizontalTextAlignment" Value="Center" />
            <Setter Property="VerticalTextAlignment" Value="Center" />
            <Setter Property="Padding" Value="5" />
        </Style>
    </ContentPage.Resources>

    <Grid Padding="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <!-- Header Row -->
            <RowDefinition Height="*" />
            <!-- Content Rows -->
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <!-- For Alignment -->
            <ColumnDefinition Width="Auto" />
            <!-- For Add Button -->
        </Grid.ColumnDefinitions>

        <!-- Agregar Nueva Mascota Button -->
        <Button Grid.Row="0" Grid.Column="1"
                Text="Agregar Nueva Mascota"
                BackgroundColor="#368ce2"
                TextColor="White"
                Clicked="btNuevaMascota_Clicked" />

        <!-- Header Row -->
        <Grid Grid.Row="0" Grid.Column="0" ColumnSpacing="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>

            <Label Grid.Row="0" Grid.Column="0" Style="{StaticResource HeaderStyle}" Text="Imagen" />
            <Label Grid.Row="0" Grid.Column="1" Style="{StaticResource HeaderStyle}" Text="Nombre" />
            <Label Grid.Row="0" Grid.Column="2" Style="{StaticResource HeaderStyle}" Text="Especie" />
            <Label Grid.Row="0" Grid.Column="3" Style="{StaticResource HeaderStyle}" Text="Raza" />
            <Label Grid.Row="0" Grid.Column="4" Style="{StaticResource HeaderStyle}" Text="Fecha de Nacimiento" />
            <Label Grid.Row="0" Grid.Column="5" Style="{StaticResource HeaderStyle}" Text="Detalles" />
        </Grid>

        <!-- Data Rows -->
        <ListView Grid.Row="1" Grid.Column="0"
                  ItemsSource="{Binding PerfilMascotas}"
                  SelectedItem="{Binding SelectedMascota}"
                  SelectionMode="None">
            <ListView.ItemTemplate>
                <DataTemplate>
                    <ViewCell>
                        <Grid Padding="5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <!-- Column for Image -->
                                <ColumnDefinition Width="*" />
                                <!-- Column for Name -->
                                <ColumnDefinition Width="*" />
                                <!-- Column for Species -->
                                <ColumnDefinition Width="*" />
                                <!-- Column for Breed -->
                                <ColumnDefinition Width="*" />
                                <!-- Column for Date of Birth -->
                                <ColumnDefinition Width="Auto" />
                                <!-- Column for Details Button -->
                            </Grid.ColumnDefinitions>

                            <Image Grid.Column="0" Source="{Binding ImageSource}" WidthRequest="40" HeightRequest="40" />
                            <Label Grid.Column="1" Text="{Binding Name}" VerticalOptions="Center" />
                            <Label Grid.Column="2" Text="{Binding Especie}" VerticalOptions="Center" />
                            <Label Grid.Column="3" Text="{Binding Raza}" VerticalOptions="Center" />
                            <Label Grid.Column="4" Text="{Binding Fecha_Nacimiento, StringFormat='{0:dd/MM/yyyy}'}" VerticalOptions="Center" />
                            <Button Grid.Column="5" Text="Ver Detalles" Command="{Binding Path=BindingContext.VerDetallesCommand, Source={x:Reference ListViewMascotas}}" CommandParameter="{Binding .}" />
                        </Grid>
                    </ViewCell>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</ContentPage>
